# Firebase Hosting デプロイ チェックリスト

このチェックリストは `DEPLOY_STEPS.md` と `docs/deployment.md` に基づいています。

## 📋 事前準備チェックリスト

### 環境確認
- [x] Node.js インストール済み
- [x] Firebase CLI インストール済み (v15.0.0)
- [x] firebase.json 作成済み
- [x] .gitignore 更新済み
- [ ] chiho@uzuratamago.com へのアクセス権限あり

### ファイル確認
- [x] index.html が存在する
- [x] src/ ディレクトリが存在する
- [x] styles/ ディレクトリが存在する
- [x] すべてのJSファイルが存在する
- [x] すべてのCSSファイルが存在する

### ローカルテスト
- [ ] ローカルでゲームが正常に動作する
- [ ] すべての機能が動作する
- [ ] ブラウザコンソールにエラーがない

## 🔐 認証とプロジェクト作成

### ステップ1: Firebase ログイン
```bash
firebase login
```

チェック項目:
- [ ] ブラウザが開いた
- [ ] chiho@uzuratamago.com でログイン完了
- [ ] 権限承認完了
- [ ] "Success! Logged in as chiho@uzuratamago.com" 表示

### ステップ2: プロジェクト作成

#### オプションA: CLI で作成
```bash
firebase projects:create
```

入力内容:
- プロジェクトID: `web-tetris-game` (または希望のID)
- プロジェクト表示名: `Web Tetris Game`

#### オプションB: Web コンソールで作成
URL: https://console.firebase.google.com/

チェック項目:
- [ ] プロジェクト作成完了
- [ ] プロジェクトIDを控えた: __________________
- [ ] プロジェクト名: Web Tetris Game
- [ ] リソースロケーション: asia-northeast1 (東京) を選択

### ステップ3: プロジェクト確認
```bash
firebase projects:list
```

チェック項目:
- [ ] 作成したプロジェクトがリストに表示される
- [ ] プロジェクトIDが正しい

## 🔧 初期化

### ステップ4: Hosting 初期化
```bash
firebase init hosting
```

対話的プロンプトの選択:
- [ ] "Use an existing project" を選択
- [ ] 作成したプロジェクトを選択
- [ ] 公開ディレクトリ: `.` (ドット) を入力
- [ ] SPA設定: `No` を選択
- [ ] GitHub自動デプロイ: `No` を選択
- [ ] firebase.json上書き: `No` を選択

### ステップ5: 設定ファイル確認
```bash
cat .firebaserc
```

チェック項目:
- [ ] .firebaserc ファイルが作成された
- [ ] プロジェクトIDが正しく設定されている

firebase.json 確認:
- [ ] "public": "." が設定されている
- [ ] ignore設定が正しい
- [ ] headers設定が存在する

## 🧪 プレビューデプロイ（テスト）

### ステップ6: プレビューチャンネルにデプロイ
```bash
firebase hosting:channel:deploy preview
```

チェック項目:
- [ ] デプロイ成功
- [ ] プレビューURLを取得: __________________
- [ ] URLにアクセス可能

### ステップ7: プレビュー環境での動作確認

基本機能:
- [ ] ページが正常に読み込まれる
- [ ] ゲームボードが表示される
- [ ] Start Game ボタンが表示される
- [ ] Start Game ボタンが機能する

ゲームプレイ:
- [ ] テトリミノが表示される
- [ ] テトリミノが自動で落下する
- [ ] ← → キーで左右移動できる
- [ ] ↑ キーで回転できる
- [ ] ↓ キーでソフトドロップできる
- [ ] Space キーでハードドロップできる
- [ ] C キーでホールドできる
- [ ] P キーで一時停止できる

UI表示:
- [ ] スコアが表示される
- [ ] レベルが表示される
- [ ] ライン数が表示される
- [ ] ハイスコアが表示される
- [ ] ネクストブロックが表示される
- [ ] ホールドエリアが表示される

動作確認:
- [ ] ライン消去が正しく動作する
- [ ] スコアが正しく加算される
- [ ] レベルアップが機能する
- [ ] ゲームオーバーが正しく判定される
- [ ] R キーでリスタートできる

技術確認:
- [ ] ブラウザコンソールにエラーがない
- [ ] すべてのリソースが読み込まれている
- [ ] ネットワークタブでエラーがない
- [ ] LocalStorageが機能する

レスポンシブ:
- [ ] デスクトップで正常に表示される
- [ ] タブレットで正常に表示される
- [ ] モバイルで正常に表示される

ブラウザ互換性:
- [ ] Chrome で動作する
- [ ] Firefox で動作する
- [ ] Safari で動作する (可能であれば)
- [ ] Edge で動作する

パフォーマンス:
- [ ] ページ読み込みが高速 (<3秒)
- [ ] ゲームプレイがスムーズ
- [ ] 遅延やラグがない

## 🚀 本番デプロイ

### ステップ8: 本番環境にデプロイ

プレビューで問題がなければ実行:
```bash
firebase deploy --only hosting
```

チェック項目:
- [ ] デプロイコマンド実行
- [ ] デプロイ成功メッセージ表示
- [ ] 本番URLを取得: __________________
- [ ] URLにアクセス可能

本番URL例:
- https://web-tetris-game.web.app
- https://web-tetris-game.firebaseapp.com

### ステップ9: 本番環境での動作確認

同じチェックリストを本番環境でも実施:
- [ ] すべての基本機能が動作
- [ ] すべてのゲームプレイ機能が動作
- [ ] すべてのUI表示が正常
- [ ] 技術的な問題がない
- [ ] レスポンシブ対応が正常
- [ ] ブラウザ互換性が正常
- [ ] パフォーマンスが良好

## 📊 デプロイ後の確認

### ステップ10: デプロイ情報確認
```bash
firebase hosting:sites:list
```

チェック項目:
- [ ] サイトがリストに表示される
- [ ] デプロイ日時が正しい

### ステップ11: Firebase Console 確認

https://console.firebase.google.com/ にアクセス:
- [ ] プロジェクトが表示される
- [ ] Hosting セクションを確認
- [ ] デプロイ済みサイトが表示される
- [ ] 使用量を確認（無料枠内）

### ステップ12: Analytics 確認（有効化した場合）
- [ ] Analytics データが記録され始めている
- [ ] ユーザーアクセスが表示される

## 📝 ドキュメント更新

### GitHub リポジトリ更新
- [ ] .firebaserc を .gitignore に追加済み
- [ ] デプロイ関連ファイルをコミット
- [ ] README.md にライブURLを追加

README.md 更新内容:
```markdown
## デモ

🎮 **ライブデモ**: https://web-tetris-game.web.app
```

- [ ] 変更をコミット
- [ ] 変更をプッシュ
- [ ] GitHubでライブURLを確認

### ステップ13: 最終確認
- [ ] GitHubリポジトリが最新
- [ ] README のライブURLが正しい
- [ ] すべてのドキュメントが更新済み
- [ ] デプロイログを保存

## 🎯 オプション設定（後日可能）

### カスタムドメイン
- [ ] ドメインを用意
- [ ] Firebase Console でカスタムドメイン追加
- [ ] DNS設定更新
- [ ] SSL証明書発行確認

### CI/CD 設定
```bash
firebase init hosting:github
```

- [ ] GitHub Actions ワークフロー作成
- [ ] 自動デプロイ設定
- [ ] プルリクエストプレビュー設定

### Performance Monitoring
- [ ] Firebase Performance 有効化
- [ ] パフォーマンスデータ収集開始

### カスタマイズ
- [ ] カスタム404ページ追加
- [ ] ヘッダー設定の最適化
- [ ] リダイレクト設定（必要に応じて）

## ⚠️ トラブルシューティング

問題が発生した場合のチェック:

### ログインできない
- [ ] `firebase logout` 実行
- [ ] `firebase login --reauth` で再認証
- [ ] ブラウザのキャッシュをクリア

### プロジェクトIDが使用済み
- [ ] 別のIDを選択: `web-tetris-game-2024`
- [ ] またはランダムID使用

### デプロイエラー
- [ ] `firebase-debug.log` を確認
- [ ] 権限を確認
- [ ] firebase.json の構文を確認

### ページが404
- [ ] firebase.json の public 設定確認
- [ ] ファイルパスを確認
- [ ] ignore設定を確認

### 機能が動作しない
- [ ] ブラウザコンソールでエラー確認
- [ ] ネットワークタブでリソース読み込み確認
- [ ] CORS エラーがないか確認

## 📞 サポートリソース

問題が解決しない場合:
1. `DEPLOY_STEPS.md` の詳細手順を確認
2. `docs/deployment.md` の計画書を確認
3. Firebase公式ドキュメント: https://firebase.google.com/docs/hosting
4. Firebase サポート: https://firebase.google.com/support
5. Stack Overflow: `firebase-hosting` タグ

## ✅ 完了確認

すべてのチェック項目が完了したら:

デプロイ完了日時: ____________________

デプロイ担当者: ____________________

本番URL: ____________________

プロジェクトID: ____________________

備考:
_______________________________________________
_______________________________________________
_______________________________________________

---

**次回のデプロイ**: このチェックリストを再利用してください。
